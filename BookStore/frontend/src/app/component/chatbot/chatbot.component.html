<!-- Floating Button -->
<button class="chatbot-button" (click)="toggle()">
  💬
</button>

<!-- Chat Window -->
<div
  class="chatbot-window"
  *ngIf="open"
  @slideFade>
  
  <!-- Header -->
  <div class="chat-header">
    <span>💬 Hỗ trợ trực tuyến</span>
    <button class="close-btn" (click)="toggle()">✖</button>
  </div>

  <!-- Chat Body -->
  <div class="chat-body">
    <div *ngFor="let msg of messages" [ngClass]="msg.role" class="chat-message">
      <div>{{ msg.content }}</div>
      <!-- Nếu có quotes thì hiển thị -->
      <div *ngIf="msg.quotes?.length" class="quotes">
        <div *ngFor="let q of msg.quotes" class="quote-item">
          <span class="title">{{ q.title }}</span>
          <span class="price">{{ q.price | currency:'VND':'symbol':'1.0-0' }}</span>
        </div>
      </div>
    </div>

    <!-- Loading indicator -->
    <div *ngIf="loading" class="chat-message bot">
      Đang gõ...
    </div>
  </div>

  <!-- Footer -->
  <div class="chat-footer">
    <input [(ngModel)]="input" (keyup.enter)="send()" placeholder="Nhập tin nhắn..." />
    <button class="send-btn" (click)="send()">➤</button>
  </div>
</div>
